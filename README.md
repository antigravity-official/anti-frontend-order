# 안티그래비티 프론트엔드 기술과제 - 전하영

전하영, 010-5427-4189

`npm run start` 로 실행하시면 `localhost:3000`에 로컬 서버가 열립니다.

------------------------------


## 구현 환경

- CRA + Typescript로 구현하였습니다.
- ESLint + Prettier 설정으로 코드 컨벤션을 맞추고 포맷팅 되도록 하였습니다.
- react-router-dom, styled-components를 사용하였습니다.

## 파일 구조

- `components` : 컴포넌트 파일 폴더
    - `common` : 공통으로 사용되는 컴포넌트 파일
    - `layout` : 앱 레이아웃 파일
    - `portal` : `react-portal`로 관리되는 모든 컴포넌트 관리
    - 기타 페이지 넘포넌트 별 폴더
- `pages` : 화면 구성 파일
- `data/json` : `mock json` 데이터 모음
- `styles` : 스타일 관련 파일 폴더
    - `font` : 폰트 설정 파일 폴더
    - `[pageName].style.ts` : 페이지 별 스타일 관리 파일
    - `GlobalStyle.ts` : 전역 스타일 관리 파일
- `theme` : styled-components 테마 파일
- `types` : 타입 관리 파일 폴더


## 사용한 라이브러리 
- react-router-dom
- styled-reset : 브라우저 별 스타일 초기화
- styled-components

## 개발 내용
- 스타일링이 `확장성`에 포함된다고 가정한 후 스타일 코드를 구조화 하였습니다.
  - `theme.ts`의 테마 정의는 기존에 진행하던 디자인시스템을 차용하였습니다.
- 모든 파일은 index.ts 파일을 만들어 모듈화 하여 관리하였습니다.
- 로딩중 컴포넌트를 react-portal을 이용해 전역으로 관리될 수 있도록 하였습니다
- 타입 가드를 이용하여 타입에 문제가 발생했을 경우 에러 상황을 throw하여 잡아낼 수 있도록 하였습니다.
  - throw된 에러는 catch로 잡아내도록 하였습니다. 
- 존재하지 않는 라우터로 접근하였을 경우 404 페이지를 출력하였습니다.
- json 규격은 다음과 같이 리팩토링 하였습니다.
  - 기존에 존재하던 `Shipping interface` 에 `productList` 프로퍼티를 추가하고 `OrderProduct[]` 타입으로 지정하였습니다.
  - 기존에 존재하던 `Order interface` 에 `shippingList` 프로퍼티를 추가하고 `ShippingList[]` 타입으로 지정하였습니다.
  
## json 포맷이 예상과 다르게 변경되었을 경우의 대응법
- 현재는 json파일이 응답과 다를 경우 **서버의 응답값이 잘못되었습니다** 는 오류를 사용자들에게 보여지게 끔 구성하였습니다.
  - 어느 부분에서 타입 에러가 발생하는지 빠르게 확인하여 `hotfix`로 수정해야할 것 같습니다.
- 변경된 json 포맷에 맞게 타입 `interface`를 수정하고 json mock 데이터를 수정하면 될 것 같습니다.
 
## 개발 개선 방향
- 현재는 json 파일로 서버 응답 값을 mocking 하여 사용하고 있지만, msw와 같은 mock server로 API를 구성할 수 있을 것 같습니다.
  -   하지만 msw를 도입하였을 때 input이 얼마나 소요되는지를 고려하여 도입하면 효율적일 것 같습니다!
- 서버응답값도 결국은 json 형태로 오기 때문에 런타임 환경에서는 타입 체크가 어려울 것이라 생각하였습니다.
  - 이를 해소하기 위하여 타입가드 함수를 만들어 json(또는 서버응답값) 이 저장하고자 하는 객체의 타입과 일치하는지 확인하게끔 하였습니다
  - 타입가드를 이용하여 API 규격이 예상과는 다를 때 발생할 수 있는 런타임 에러를 최대한 방지하고자 하였습니다. 
    - 타입가드가 `Order.tsx` 파일에 포함되어있지만, 조금 더 책임을 분리하여 구조화 할 수 있지 않을까 생각하였습니다.
    - 검증해야 할 객체의 depth가 깊어지면 성능 이슈가 없는지도 궁금합니다.

